(self["webpackChunkproject_week7"]=self["webpackChunkproject_week7"]||[]).push([[660],{1194:function(t,e,n){var r=n(7293),a=n(5112),i=n(7392),o=a("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},1589:function(t,e,n){var r=n(7854),a=n(1400),i=n(6244),o=n(6135),l=r.Array,s=Math.max;t.exports=function(t,e,n){for(var r=i(t),u=a(e,r),c=a(void 0===n?r:n,r),d=l(s(c-u,0)),p=0;u<c;u++,p++)o(d,p,t[u]);return d.length=p,d}},6135:function(t,e,n){"use strict";var r=n(4948),a=n(3070),i=n(9114);t.exports=function(t,e,n){var o=r(e);o in t?a.f(t,o,i(0,n)):t[o]=n}},7235:function(t,e,n){var r=n(857),a=n(2597),i=n(6061),o=n(3070).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});a(e,t)||o(e,t,{value:i.f(t)})}},1156:function(t,e,n){var r=n(4326),a=n(5656),i=n(8006).f,o=n(1589),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return o(l)}};t.exports.f=function(t){return l&&"Window"==r(t)?s(t):i(a(t))}},857:function(t,e,n){var r=n(7854);t.exports=r},6061:function(t,e,n){var r=n(5112);e.f=r},2222:function(t,e,n){"use strict";var r=n(2109),a=n(7854),i=n(7293),o=n(3157),l=n(111),s=n(7908),u=n(6244),c=n(6135),d=n(5417),p=n(1194),f=n(5112),h=n(7392),g=f("isConcatSpreadable"),m=9007199254740991,_="Maximum allowed index exceeded",b=a.TypeError,v=h>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),y=p("concat"),w=function(t){if(!l(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)},O=!v||!y;r({target:"Array",proto:!0,forced:O},{concat:function(t){var e,n,r,a,i,o=s(this),l=d(o,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?o:arguments[e],w(i)){if(a=u(i),p+a>m)throw b(_);for(n=0;n<a;n++,p++)n in i&&c(l,p,i[n])}else{if(p>=m)throw b(_);c(l,p++,i)}return l.length=p,l}})},8309:function(t,e,n){var r=n(9781),a=n(6530).EXISTS,i=n(1702),o=n(3070).f,l=Function.prototype,s=i(l.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,c=i(u.exec),d="name";r&&!a&&o(l,d,{configurable:!0,get:function(){try{return c(u,s(this))[1]}catch(t){return""}}})},2526:function(t,e,n){"use strict";var r=n(2109),a=n(7854),i=n(5005),o=n(2104),l=n(6916),s=n(1702),u=n(1913),c=n(9781),d=n(133),p=n(7293),f=n(2597),h=n(3157),g=n(614),m=n(111),_=n(7976),b=n(2190),v=n(9670),y=n(7908),w=n(5656),O=n(4948),k=n(1340),x=n(9114),D=n(30),P=n(1956),M=n(8006),S=n(1156),C=n(5181),z=n(1236),$=n(3070),j=n(6048),L=n(5296),E=n(206),Z=n(1320),N=n(2309),H=n(6200),Y=n(3501),q=n(9711),U=n(5112),W=n(6061),I=n(7235),K=n(8003),F=n(9909),T=n(2092).forEach,V=H("hidden"),A="Symbol",J="prototype",B=U("toPrimitive"),Q=F.set,X=F.getterFor(A),G=Object[J],R=a.Symbol,tt=R&&R[J],et=a.TypeError,nt=a.QObject,rt=i("JSON","stringify"),at=z.f,it=$.f,ot=S.f,lt=L.f,st=s([].push),ut=N("symbols"),ct=N("op-symbols"),dt=N("string-to-symbol-registry"),pt=N("symbol-to-string-registry"),ft=N("wks"),ht=!nt||!nt[J]||!nt[J].findChild,gt=c&&p((function(){return 7!=D(it({},"a",{get:function(){return it(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=at(G,e);r&&delete G[e],it(t,e,n),r&&t!==G&&it(G,e,r)}:it,mt=function(t,e){var n=ut[t]=D(tt);return Q(n,{type:A,tag:t,description:e}),c||(n.description=e),n},_t=function(t,e,n){t===G&&_t(ct,e,n),v(t);var r=O(e);return v(n),f(ut,r)?(n.enumerable?(f(t,V)&&t[V][r]&&(t[V][r]=!1),n=D(n,{enumerable:x(0,!1)})):(f(t,V)||it(t,V,x(1,{})),t[V][r]=!0),gt(t,r,n)):it(t,r,n)},bt=function(t,e){v(t);var n=w(e),r=P(n).concat(kt(n));return T(r,(function(e){c&&!l(yt,n,e)||_t(t,e,n[e])})),t},vt=function(t,e){return void 0===e?D(t):bt(D(t),e)},yt=function(t){var e=O(t),n=l(lt,this,e);return!(this===G&&f(ut,e)&&!f(ct,e))&&(!(n||!f(this,e)||!f(ut,e)||f(this,V)&&this[V][e])||n)},wt=function(t,e){var n=w(t),r=O(e);if(n!==G||!f(ut,r)||f(ct,r)){var a=at(n,r);return!a||!f(ut,r)||f(n,V)&&n[V][r]||(a.enumerable=!0),a}},Ot=function(t){var e=ot(w(t)),n=[];return T(e,(function(t){f(ut,t)||f(Y,t)||st(n,t)})),n},kt=function(t){var e=t===G,n=ot(e?ct:w(t)),r=[];return T(n,(function(t){!f(ut,t)||e&&!f(G,t)||st(r,ut[t])})),r};if(d||(R=function(){if(_(tt,this))throw et("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?k(arguments[0]):void 0,e=q(t),n=function(t){this===G&&l(n,ct,t),f(this,V)&&f(this[V],e)&&(this[V][e]=!1),gt(this,e,x(1,t))};return c&&ht&&gt(G,e,{configurable:!0,set:n}),mt(e,t)},tt=R[J],Z(tt,"toString",(function(){return X(this).tag})),Z(R,"withoutSetter",(function(t){return mt(q(t),t)})),L.f=yt,$.f=_t,j.f=bt,z.f=wt,M.f=S.f=Ot,C.f=kt,W.f=function(t){return mt(U(t),t)},c&&(it(tt,"description",{configurable:!0,get:function(){return X(this).description}}),u||Z(G,"propertyIsEnumerable",yt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:R}),T(P(ft),(function(t){I(t)})),r({target:A,stat:!0,forced:!d},{for:function(t){var e=k(t);if(f(dt,e))return dt[e];var n=R(e);return dt[e]=n,pt[n]=e,n},keyFor:function(t){if(!b(t))throw et(t+" is not a symbol");if(f(pt,t))return pt[t]},useSetter:function(){ht=!0},useSimple:function(){ht=!1}}),r({target:"Object",stat:!0,forced:!d,sham:!c},{create:vt,defineProperty:_t,defineProperties:bt,getOwnPropertyDescriptor:wt}),r({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Ot,getOwnPropertySymbols:kt}),r({target:"Object",stat:!0,forced:p((function(){C.f(1)}))},{getOwnPropertySymbols:function(t){return C.f(y(t))}}),rt){var xt=!d||p((function(){var t=R();return"[null]"!=rt([t])||"{}"!=rt({a:t})||"{}"!=rt(Object(t))}));r({target:"JSON",stat:!0,forced:xt},{stringify:function(t,e,n){var r=E(arguments),a=e;if((m(e)||void 0!==t)&&!b(t))return h(e)||(e=function(t,e){if(g(a)&&(e=l(a,this,t,e)),!b(e))return e}),r[1]=e,o(rt,null,r)}})}if(!tt[B]){var Dt=tt.valueOf;Z(tt,B,(function(t){return l(Dt,this)}))}K(R,A),Y[V]=!0},8478:function(t,e,n){"use strict";n.d(e,{Z:function(){return b}});var r=n(6252),a=n(3577),i=n(9963),o={"aria-label":"Page navigation example"},l={class:"pagination justify-content-center"},s=(0,r._)("span",{"aria-hidden":"true"},"«",-1),u=[s],c={key:0,class:"page-link"},d=["onClick"],p=(0,r._)("span",{"aria-hidden":"true"},"»",-1),f=[p];function h(t,e,n,s,p,h){return(0,r.wg)(),(0,r.iD)("nav",o,[(0,r._)("ul",l,[(0,r._)("li",{class:(0,a.C_)([{disabled:!n.pages.has_pre},"page-item"])},[(0,r._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,i.iM)((function(t){return h.updatePage(n.pages.current_page-1)}),["prevent"]))},u)],2),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.pages.total_pages,(function(t){return(0,r.wg)(),(0,r.iD)("li",{class:(0,a.C_)(["page-item",{active:n.pages.current_page===t}]),key:t},[t===n.pages.current_page?((0,r.wg)(),(0,r.iD)("span",c,(0,a.zw)(t),1)):((0,r.wg)(),(0,r.iD)("a",{key:1,class:"page-link",href:"#",onClick:(0,i.iM)((function(e){return h.updatePage(t)}),["prevent"])},(0,a.zw)(t),9,d))],2)})),128)),(0,r._)("li",{class:(0,a.C_)(["page-item",{disabled:!n.pages.has_next}])},[(0,r._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,i.iM)((function(t){return h.updatePage(n.pages.current_page+1)}),["prevent"]))},f)],2)])])}var g={props:["pages"],methods:{updatePage:function(t){this.$emit("emitPages",t)}}},m=n(3744);const _=(0,m.Z)(g,[["render",h]]);var b=_},9720:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return ht}});var r=n(6252),a=n(3577),i=n(9963),o={class:"table mt-4"},l=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"購買時間"),(0,r._)("th",null,"Email"),(0,r._)("th",null,"購買款項"),(0,r._)("th",null,"應付金額"),(0,r._)("th",null,"是否付款"),(0,r._)("th",null,"編輯")])],-1),s=["textContent"],u={class:"list-unstyled"},c={class:"text-right"},d={class:"form-check form-switch"},p=["id","onUpdate:modelValue","onChange"],f=["for"],h={key:0},g={key:1},m={class:"btn-group"},_=["onClick"],b=["onClick"];function v(t,e,n,v,y,w){var O=(0,r.up)("Loading"),k=(0,r.up)("OrderModal"),x=(0,r.up)("DelModal"),D=(0,r.up)("Pagination");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(O,{active:y.isLoading,"z-index":1060},null,8,["active"]),(0,r._)("table",o,[l,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(y.orders,(function(e,n){return(0,r.wg)(),(0,r.iD)(r.HY,{key:n},[y.orders.length?((0,r.wg)(),(0,r.iD)("tr",{key:0,class:(0,a.C_)({"text-secondary":!e.is_paid})},[(0,r._)("td",null,(0,a.zw)(t.$filters.date(e.create_at)),1),(0,r._)("td",null,[e.user?((0,r.wg)(),(0,r.iD)("span",{key:0,textContent:(0,a.zw)(e.user.email)},null,8,s)):(0,r.kq)("",!0)]),(0,r._)("td",null,[(0,r._)("ul",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.products,(function(t,e){return(0,r.wg)(),(0,r.iD)("li",{key:e},(0,a.zw)(t.product.title)+" 數量："+(0,a.zw)(t.qty)+" "+(0,a.zw)(t.product.unit),1)})),128))])]),(0,r._)("td",c,(0,a.zw)(e.total),1),(0,r._)("td",null,[(0,r._)("div",d,[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_paid=t},onChange:function(t){return w.updatePaid(e)}},null,40,p),[[i.e8,e.is_paid]]),(0,r._)("label",{class:"form-check-label",for:"paidSwitch".concat(e.id)},[e.is_paid?((0,r.wg)(),(0,r.iD)("span",h,"已付款")):((0,r.wg)(),(0,r.iD)("span",g,"未付款"))],8,f)])]),(0,r._)("td",null,[(0,r._)("div",m,[(0,r._)("button",{class:"btn btn-outline-primary btn-sm",type:"button",onClick:function(t){return w.openModal(e)}}," 檢視 ",8,_),(0,r._)("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:function(t){return w.openDelOrderModal(e)}}," 刪除 ",8,b)])])],2)):(0,r.kq)("",!0)],64)})),128))])]),(0,r.Wm)(k,{order:y.tempOrder,ref:"orderModal",onUpdatePaid:w.updatePaid},null,8,["order","onUpdatePaid"]),(0,r.Wm)(x,{item:y.tempOrder,ref:"delModal",onDelItem:w.delOrder},null,8,["item","onDelItem"]),(0,r.Wm)(D,{pages:y.pagination,onEmitPages:w.getOrders},null,8,["pages","onEmitPages"])],64)}var y=n(4648),w=(n(2222),n(5733)),O=(n(8309),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),k={class:"modal-dialog modal-xl",role:"document"},x={class:"modal-content border-0"},D=(0,r._)("div",{class:"modal-header bg-dark text-white"},[(0,r._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,r._)("span",null,"訂單細節")]),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),P={class:"modal-body"},M={class:"row"},S={class:"col-md-4"},C=(0,r._)("h3",null,"用戶資料",-1),z={class:"table"},$={key:0},j=(0,r._)("th",{style:{width:"100px"}},"姓名",-1),L=(0,r._)("th",null,"Email",-1),E=(0,r._)("th",null,"電話",-1),Z=(0,r._)("th",null,"地址",-1),N={class:"col-md-8"},H=(0,r._)("h3",null,"訂單細節",-1),Y={class:"table"},q=(0,r._)("th",{style:{width:"100px"}},"訂單編號",-1),U=(0,r._)("th",null,"下單時間",-1),W=(0,r._)("th",null,"付款時間",-1),I={key:0},K={key:1},F=(0,r._)("th",null,"付款狀態",-1),T={key:0,class:"text-success"},V={key:1,class:"text-muted"},A=(0,r._)("th",null,"總金額",-1),J=(0,r._)("h3",null,"選購商品",-1),B={class:"table"},Q=(0,r._)("thead",null,[(0,r._)("tr")],-1),X={class:"text-end"},G={class:"d-flex justify-content-end"},R={class:"form-check"},tt={class:"form-check-label",for:"flexCheckDefault"},et={key:0},nt={key:1},rt={class:"modal-footer"},at=(0,r._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function it(t,e,n,o,l,s){return(0,r.wg)(),(0,r.iD)("div",O,[(0,r._)("div",k,[(0,r._)("div",x,[D,(0,r._)("div",P,[(0,r._)("div",M,[(0,r._)("div",S,[C,(0,r._)("table",z,[l.tempOrder.user?((0,r.wg)(),(0,r.iD)("tbody",$,[(0,r._)("tr",null,[j,(0,r._)("td",null,(0,a.zw)(l.tempOrder.user.name),1)]),(0,r._)("tr",null,[L,(0,r._)("td",null,(0,a.zw)(l.tempOrder.user.email),1)]),(0,r._)("tr",null,[E,(0,r._)("td",null,(0,a.zw)(l.tempOrder.user.tel),1)]),(0,r._)("tr",null,[Z,(0,r._)("td",null,(0,a.zw)(l.tempOrder.user.address),1)])])):(0,r.kq)("",!0)])]),(0,r._)("div",N,[H,(0,r._)("table",Y,[(0,r._)("tbody",null,[(0,r._)("tr",null,[q,(0,r._)("td",null,(0,a.zw)(l.tempOrder.id),1)]),(0,r._)("tr",null,[U,(0,r._)("td",null,(0,a.zw)(t.$filters.date(l.tempOrder.create_at)),1)]),(0,r._)("tr",null,[W,(0,r._)("td",null,[l.tempOrder.paid_date?((0,r.wg)(),(0,r.iD)("span",I,(0,a.zw)(t.$filters.date(l.tempOrder.paid_date)),1)):((0,r.wg)(),(0,r.iD)("span",K,"時間不正確"))])]),(0,r._)("tr",null,[F,(0,r._)("td",null,[l.tempOrder.is_paid?((0,r.wg)(),(0,r.iD)("strong",T,"已付款")):((0,r.wg)(),(0,r.iD)("span",V,"尚未付款"))])]),(0,r._)("tr",null,[A,(0,r._)("td",null,(0,a.zw)(t.$filters.currency(l.tempOrder.total)),1)])])]),J,(0,r._)("table",B,[Q,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.tempOrder.products,(function(e){return(0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("th",null,(0,a.zw)(e.product.title),1),(0,r._)("td",null,(0,a.zw)(e.qty)+" / "+(0,a.zw)(e.product.unit),1),(0,r._)("td",X,(0,a.zw)(t.$filters.currency(e.final_total)),1)])})),128))])]),(0,r._)("div",G,[(0,r._)("div",R,[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":e[0]||(e[0]=function(t){return l.tempOrder.is_paid=t})},null,512),[[i.e8,l.tempOrder.is_paid]]),(0,r._)("label",tt,[l.tempOrder.is_paid?((0,r.wg)(),(0,r.iD)("span",et,"已付款")):((0,r.wg)(),(0,r.iD)("span",nt,"未付款"))])])])])])]),(0,r._)("div",rt,[at,(0,r._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=function(e){return t.$emit("update-paid",l.tempOrder)})}," 修改付款狀態 ")])])])],512)}var ot=n(1339),lt={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{status:{},modal:"",tempOrder:{},isPaid:!1}},emits:["update-paid"],mixins:[ot.Z],inject:["emitter"],watch:{order:function(){this.tempOrder=this.order}}},st=n(3744);const ut=(0,st.Z)(lt,[["render",it]]);var ct=ut,dt=n(8478),pt={data:function(){return{orders:{},isNew:!1,pagination:{},isLoading:!1,tempOrder:{},currentPage:1}},components:{Pagination:dt.Z,DelModal:w.Z,OrderModal:ct},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=e;var n="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("sharon1987","/admin/orders?page=").concat(e);this.isLoading=!0,this.$http.get(n,this.tempProduct).then((function(e){t.orders=e.data.orders,t.pagination=e.data.pagination,t.isLoading=!1})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"錯誤訊息")}))},openModal:function(t){this.tempOrder=(0,y.Z)({},t),this.isNew=!1;var e=this.$refs.orderModal;e.openModal()},openDelOrderModal:function(t){this.tempOrder=(0,y.Z)({},t);var e=this.$refs.delModal;e.openModal()},updatePaid:function(t){var e=this;this.isLoading=!0;var n="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("sharon1987","/admin/order/").concat(t.id),r={is_paid:t.is_paid};this.$http.put(n,{data:r}).then((function(t){e.isLoading=!1;var n=e.$refs.orderModal;n.hideModal(),e.getOrders(e.currentPage),e.$httpMessageState(t,"更新付款狀態")})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("sharon1987","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(e).then((function(){t.isLoading=!1;var e=t.$refs.delModal;e.hideModal(),t.getOrders(t.currentPage)})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"錯誤訊息")}))}},created:function(){this.getOrders()}};const ft=(0,st.Z)(pt,[["render",v]]);var ht=ft}}]);
//# sourceMappingURL=660-legacy.d78bab79.js.map